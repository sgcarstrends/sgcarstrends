graph TB
    %% External Services
    LTA[LTA DataMall APIs]

    %% AI Services
    Gemini[Vercel AI SDK + Google Gemini]

    %% Social Media Platforms
    Discord[Discord]
    LinkedIn[LinkedIn]
    Telegram[Telegram]
    Twitter[Twitter]

    %% Infrastructure Layer
    subgraph "Vercel Platform"
        subgraph "Compute"
            WebFunctions[Next.js Server Functions]
            WDKRuntime[WDK Workflow Runtime]
        end

        subgraph "Edge Network"
            VercelEdge[Vercel Edge Network]
            VercelCDN[Vercel CDN]
        end

        subgraph "Cron Jobs"
            CronScheduler[Vercel Cron]
        end
    end

    %% External Storage
    subgraph "Managed Services"
        Neon[(Neon PostgreSQL)]
        Upstash[(Upstash Redis)]
        Blob[Vercel Blob Storage]
    end

    %% Application Layer
    subgraph "SG Cars Trends Platform"
        subgraph "Apps"
            Web[Web Application - Next.js 16]
        end

        subgraph "Packages"
            Database[Database Package - Drizzle ORM]
            Types[Types Package]
            Utils[Utils Package + Redis Client]
            AI[AI Package - Blog Generation]
            Logos[Logos Package - Vercel Blob]
        end
    end

    %% Workflow System
    subgraph "Data Processing"
        CarsWorkflow[Cars Data Workflow]
        COEWorkflow[COE Data Workflow]
        DeregWorkflow[Deregistrations Workflow]
        BlogWorkflow[Blog Generation Workflow]
    end

    %% Connections
    %% User to Infrastructure
    Users[Users] --> VercelEdge
    VercelEdge --> VercelCDN
    VercelCDN --> WebFunctions

    %% Application to Infrastructure
    Web --> WebFunctions

    %% Package dependencies
    Web --> Database
    Web --> Types
    Web --> Utils
    Web --> AI
    Web --> Logos

    %% Database connections
    Database --> Neon
    Utils --> Upstash
    Web --> Neon
    Web --> Upstash
    Logos --> Blob
    Logos --> Upstash

    %% Workflow connections
    CronScheduler --> WDKRuntime
    WDKRuntime --> CarsWorkflow
    WDKRuntime --> COEWorkflow
    WDKRuntime --> DeregWorkflow
    WDKRuntime --> BlogWorkflow

    %% External API connections
    CarsWorkflow --> LTA
    COEWorkflow --> LTA
    DeregWorkflow --> LTA
    BlogWorkflow --> Gemini

    %% Social media connections
    CarsWorkflow --> Discord
    CarsWorkflow --> LinkedIn
    CarsWorkflow --> Telegram
    CarsWorkflow --> Twitter
    COEWorkflow --> Discord
    COEWorkflow --> LinkedIn
    COEWorkflow --> Telegram
    COEWorkflow --> Twitter

    %% Styling
    classDef app fill:#e1f5fe
    classDef package fill:#f3e5f5
    classDef infrastructure fill:#e8f5e8
    classDef external fill:#fff3e0
    classDef workflow fill:#fce4ec
    classDef storage fill:#e0f2f1

    class Web app
    class Database,Types,Utils,AI,Logos package
    class WebFunctions,WDKRuntime,VercelEdge,VercelCDN,CronScheduler infrastructure
    class LTA,Gemini,Discord,LinkedIn,Telegram,Twitter external
    class CarsWorkflow,COEWorkflow,DeregWorkflow,BlogWorkflow workflow
    class Neon,Upstash,Blob storage
