graph TB
    %% Users and External Access
    Users[End Users]
    Developers[Developers]

    %% DNS Layer
    subgraph "DNS Management"
        VercelDNS[Vercel DNS]

        subgraph "Domain Strategy"
            ProdDomain[sgcarstrends.com]
            PreviewDomain[*.vercel.app]
        end
    end

    %% Vercel Infrastructure
    subgraph "Vercel Platform"
        %% Edge Network
        subgraph "Edge Network"
            EdgeFunctions[Edge Functions]
            CDN[Global CDN]
        end

        %% Web Application
        subgraph "Web Application"
            NextjsSSR[Next.js Server Functions]
            StaticAssets[Static Assets]

            subgraph "Function Config"
                Runtime[Node.js 22.x]
                Region[Singapore Region]
                NextjsFramework[Next.js 16 Framework]
            end
        end

        %% Workflows
        subgraph "Vercel WDK Workflows"
            CarsWorkflow[Cars Data Workflow]
            COEWorkflow[COE Data Workflow]
            DeregWorkflow[Deregistrations Workflow]
            VercelCron[Vercel Cron Scheduler]
        end
    end

    %% External Services
    subgraph "External Services"
        %% Data Sources
        subgraph "Data Sources"
            LTA[LTA DataMall APIs]
            GeminiAI[Vercel AI SDK + Google Gemini]
        end

        %% Databases
        subgraph "Managed Databases"
            PostgreSQL[(PostgreSQL Database<br/>Neon)]
            Upstash[(Redis Cache<br/>Upstash)]
            Blob[(Vercel Blob<br/>Logo Storage)]
        end

        %% Social Media
        subgraph "Social Media APIs"
            Discord[Discord Webhooks]
            LinkedIn[LinkedIn API]
            Telegram[Telegram Bot API]
            Twitter[Twitter API]
        end
    end

    %% Traffic Flow
    Users --> VercelDNS
    Developers --> VercelDNS

    %% DNS Resolution
    VercelDNS --> ProdDomain
    VercelDNS --> PreviewDomain

    %% CDN Distribution
    ProdDomain --> CDN
    PreviewDomain --> CDN

    %% Web Traffic
    CDN --> EdgeFunctions
    CDN --> NextjsSSR
    CDN --> StaticAssets

    %% Function Configuration
    NextjsSSR --> Runtime
    NextjsSSR --> Region
    NextjsSSR --> NextjsFramework

    %% Workflow Triggers
    VercelCron --> CarsWorkflow
    VercelCron --> COEWorkflow
    VercelCron --> DeregWorkflow

    %% External Connections
    CarsWorkflow --> LTA
    COEWorkflow --> LTA
    DeregWorkflow --> LTA
    CarsWorkflow --> GeminiAI
    COEWorkflow --> GeminiAI

    NextjsSSR --> PostgreSQL
    NextjsSSR --> Upstash
    NextjsSSR --> Blob

    CarsWorkflow --> PostgreSQL
    COEWorkflow --> PostgreSQL
    DeregWorkflow --> PostgreSQL

    CarsWorkflow --> Discord
    CarsWorkflow --> LinkedIn
    CarsWorkflow --> Telegram
    CarsWorkflow --> Twitter

    %% Styling
    classDef vercel fill:#000,color:#fff
    classDef external fill:#e0e0e0
    classDef dns fill:#f76707
    classDef function fill:#7c4dff,color:#fff
    classDef database fill:#4caf50,color:#fff
    classDef social fill:#2196f3,color:#fff

    class EdgeFunctions,CDN,NextjsSSR,StaticAssets,CarsWorkflow,COEWorkflow,DeregWorkflow,VercelCron vercel
    class VercelDNS dns
    class Runtime,Region,NextjsFramework function
    class PostgreSQL,Upstash,Blob database
    class LTA,GeminiAI external
    class Discord,LinkedIn,Telegram,Twitter social
